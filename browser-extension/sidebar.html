<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ginko for Claude</title>
    <link rel="stylesheet" href="sidebar.css">
</head>
<body>
    <div class="sidebar">
        <!-- Header with Ginko branding -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                            <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                            <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="logo-text">
                        <span class="brand-name">Ginko</span>
                        <span class="tagline">for Claude</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main content area -->
        <main class="main-content">
            <!-- Session info - subtle and minimal -->
            <div class="session-info" id="sessionInfo">
                <span class="session-label">Session:</span>
                <span class="session-time" id="sessionTime">Loading...</span>
            </div>
            
            <!-- Context Tracker Progress Bar -->
            <div class="context-tracker" id="contextTracker">
                <div class="progress-container">
                    <div class="progress-bar" id="progressBar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-markers">
                        <span class="marker" style="left: 0">0</span>
                        <span class="marker" style="left: 50%">3m</span>
                        <span class="marker" style="left: 100%">6m</span>
                    </div>
                </div>
                <div class="context-status" id="contextStatus">
                    <span class="status-icon" id="statusIcon">üíö</span>
                    <span class="status-message" id="statusMessage">Fresh context - ideal for complex work</span>
                </div>
            </div>

            <!-- HERO: Generate Handoff Button -->
            <div class="hero-section">
                <button class="btn-hero" id="generateHandoffBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2L13.09 8.26L19 7L14.74 13.09L21 12L15.26 18.74L21 19L13.09 15.74L12 22L10.91 15.74L5 17L9.26 10.91L3 12L8.74 5.26L3 5L10.91 8.26L12 2Z" fill="currentColor"/>
                    </svg>
                    <span>Generate Handoff</span>
                </button>
                <p class="hero-description">Save your context before Claude forgets</p>
            </div>

            <!-- Coaching hint - contextual and authoritative -->
            <div class="coaching-section" id="coachingSection">
                <div class="coaching-hint" id="coachingHint">
                    <!-- Dynamically populated based on session state -->
                </div>
            </div>

            <!-- Secondary actions -->
            <div class="secondary-actions">
                <!-- Resume last session -->
                <div class="resume-section hidden" id="resumeSection">
                    <button class="btn-secondary" id="resumeSessionBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <polygon points="5,3 19,12 5,21" fill="currentColor"/>
                        </svg>
                        Resume Last Session
                    </button>
                    <div class="last-session-info" id="lastSessionInfo"></div>
                </div>

                <!-- Quick templates (visible and accessible) -->
                <div class="quick-templates" id="quickTemplates">
                    <span class="templates-label">Quick starts:</span>
                    <div class="template-grid">
                        <button class="template-link" data-template="cleanSlate">üÜï Clean Slate</button>
                        <button class="template-link" data-template="workplan">üìã Workplan</button>
                        <button class="template-link" data-template="feature">‚ú® Add Feature</button>
                        <button class="template-link" data-template="test">üß™ Create Test</button>
                        <button class="template-link" data-template="debug">üîç Debug</button>
                        <button class="template-link" data-template="gitCommit">üìù Git Commit</button>
                    </div>
                </div>
            </div>

            <!-- Prompt History Section -->
            <div class="prompt-history" id="promptHistory">
                <div class="history-header">
                    <span class="history-label">Recent Prompts</span>
                    <button class="btn-text-small" id="clearHistoryBtn">Clear</button>
                </div>
                <div class="history-list" id="historyList">
                    <!-- History items will be dynamically added here -->
                </div>
                <div class="history-empty hidden" id="historyEmpty">
                    <span class="empty-message">No prompts yet. Use a template above to get started!</span>
                </div>
            </div>

            <!-- Template Form Section -->
            <div class="template-form-panel hidden" id="templateFormPanel">
                <div class="form-header">
                    <h3 id="formTitle">Template</h3>
                    <button class="btn-close" id="closeFormBtn">‚úï</button>
                </div>
                
                <div class="form-description" id="formDescription"></div>
                
                <div class="form-content">
                    <form id="templateForm">
                        <!-- Dynamic form fields will be inserted here -->
                    </form>
                    <div class="form-actions">
                        <button type="button" class="btn-secondary" id="resetFormBtn">Reset</button>
                        <button type="button" class="btn-primary" id="generateFromFormBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2L13.09 8.26L19 7L14.74 13.09L21 12L15.26 18.74L21 19L13.09 15.74L12 22L10.91 15.74L5 17L9.26 10.91L3 12L8.74 5.26L3 5L10.91 8.26L12 2Z" fill="currentColor"/>
                            </svg>
                            Done
                        </button>
                    </div>
                </div>
            </div>

            <!-- Toast Message Container -->
            <div class="toast-container" id="toastContainer"></div>

            <!-- Handoff workflow (appears after clicking Generate) -->
            <div class="handoff-workflow hidden" id="handoffWorkflow">
                <div class="workflow-step">
                    <div class="step-header">
                        <span class="step-number">1</span>
                        <span class="step-title">Copy this prompt to Claude</span>
                    </div>
                    <div class="prompt-box" id="promptBox">
                        <pre id="generatedPrompt"></pre>
                        <button class="btn-copy" id="copyPromptBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2" stroke="currentColor" stroke-width="2" fill="none"/>
                                <path d="m5,15 L5,5 A2,2 0 0,1 7,3 L17,3" stroke="currentColor" stroke-width="2" fill="none"/>
                            </svg>
                            Copy
                        </button>
                    </div>
                </div>

                <div class="workflow-step">
                    <div class="step-header">
                        <span class="step-number">2</span>
                        <span class="step-title">Save Claude's response</span>
                    </div>
                    <textarea id="handoffInput" placeholder="Paste Claude's handoff here..." rows="6"></textarea>
                    <button class="btn-success" id="saveHandoffBtn">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M19 21H5C3.89543 21 3 20.1046 3 19V5C3 3.89543 3.89543 3 5 3H16L21 8V19C21 20.1046 20.1046 21 19 21Z" stroke="currentColor" stroke-width="2" fill="none"/>
                            <path d="M17 21V13H7V21" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                        Save Handoff
                    </button>
                </div>
            </div>

            <!-- Success state after saving -->
            <div class="success-state hidden" id="successState">
                <div class="success-message">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="12" cy="12" r="10" stroke="#10b981" stroke-width="2" fill="none"/>
                        <polyline points="9,12 11,14 15,10" stroke="#10b981" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>Handoff saved!</span>
                </div>
                <button class="btn-primary" id="newSessionBtn">Start New Session</button>
            </div>
        </main>

        <!-- Footer with subtle insights link -->
        <footer class="footer">
            <div class="footer-content">
                <button class="insights-link" id="toggleInsights">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="3" y="10" width="4" height="11" fill="currentColor"/>
                        <rect x="10" y="6" width="4" height="15" fill="currentColor"/>
                        <rect x="17" y="3" width="4" height="18" fill="currentColor"/>
                    </svg>
                    Insights
                </button>
                <a href="https://ginko.ai/learn?utm_source=extension&utm_medium=footer&utm_campaign=learn-more" class="footer-link" target="_blank">
                    Learn more
                </a>
            </div>
        </footer>

        <!-- Insights panel (slides up from bottom) -->
        <div class="insights-panel hidden" id="insightsPanel">
            <div class="insights-header">
                <h3>Collaboration Insights</h3>
                <button class="btn-close" id="closeInsights">√ó</button>
            </div>
            <div class="insights-content">
                <div class="insight-card">
                    <div class="insight-metric">
                        <span class="metric-value" id="sessionQuality">-</span>
                        <span class="metric-label">Session Quality</span>
                    </div>
                    <p class="insight-tip" id="qualityTip"></p>
                </div>
                <div class="insight-card">
                    <div class="insight-metric">
                        <span class="metric-value" id="timeSaved">-</span>
                        <span class="metric-label">Minutes Saved</span>
                    </div>
                    <p class="insight-tip">Each handoff saves ~15 minutes of context rebuilding. <a href="https://ginko.ai/evidence/time-saved?utm_source=extension&utm_medium=insights&utm_campaign=time-saved" target="_blank">See how ‚Üí</a></p>
                </div>
                <div class="insight-card">
                    <div class="insight-metric">
                        <span class="metric-value" id="handoffCount">-</span>
                        <span class="metric-label">Total Handoffs</span>
                    </div>
                    <p class="insight-tip" id="handoffTip"></p>
                </div>
            </div>
        </div>

        <!-- Notifications -->
        <div class="notification hidden" id="notification">
            <div class="notification-content">
                <div class="notification-message" id="notificationMessage"></div>
                <button class="notification-close" id="notificationClose">√ó</button>
            </div>
        </div>
    </div>

    <script src="sidebar.js"></script>
</body>
</html>