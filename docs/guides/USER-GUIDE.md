/**
 * @fileType: guide
 * @status: current
 * @updated: 2025-11-07
 * @tags: [documentation, user-guide, comprehensive, reference]
 * @related: [QUICK-START.md, CLI-REFERENCE.md, API-REFERENCE.md]
 * @priority: critical
 * @complexity: medium
 */

# Ginko User Guide

Complete guide to using Ginko for knowledge management and AI-assisted development.

---

## Table of Contents

1. [Introduction](#introduction)
2. [Core Concepts](#core-concepts)
3. [Getting Started](#getting-started)
4. [Knowledge Management](#knowledge-management)
5. [Project Management](#project-management)
6. [Team Collaboration](#team-collaboration)
7. [Session Workflows](#session-workflows)
8. [Search & Discovery](#search--discovery)
9. [Advanced Features](#advanced-features)
10. [Best Practices](#best-practices)
11. [Troubleshooting](#troubleshooting)

---

## Introduction

### What is Ginko?

Ginko is a **cloud-first knowledge graph platform** for AI-assisted development. It solves the problem of **context loss** in software development by:

- **Capturing knowledge** in a structured graph database
- **Preserving context** across sessions and context resets
- **Enabling semantic search** to find relevant information instantly
- **Facilitating collaboration** through shared knowledge graphs

### Key Features

- **Git-Native Design** - Works seamlessly with git repositories
- **Semantic Search** - Find knowledge using natural language queries
- **Vector Embeddings** - Powered by Voyage AI for high-quality similarity matching
- **Multi-Tenant** - Projects, teams, and fine-grained access control
- **Cloud-First** - Knowledge stored in Neo4j graph database
- **CLI-First** - Command-line interface for developers
- **Public Discovery** - Browse and search open-source knowledge

### Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   CLI       ‚îÇ  ‚Üê You interact here
‚îÇ  (ginko)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îÇ HTTPS/GraphQL
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  API Server ‚îÇ  ‚Üê Next.js App Router
‚îÇ (app.ginko) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îÇ Cypher
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Neo4j     ‚îÇ  ‚Üê Graph database + vector search
‚îÇ  (AuraDB)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Core Concepts

### Knowledge Nodes

**Knowledge nodes** are the fundamental units of information in Ginko. Each node represents a piece of knowledge with:

- **Type** - What kind of knowledge (ADR, PRD, ContextModule, etc.)
- **Title** - Human-readable name
- **Content** - Full text content (markdown supported)
- **Tags** - Searchable keywords
- **Status** - active, archived, or draft
- **Metadata** - Created/updated timestamps, author

**Supported Node Types:**

| Type | Description | Example |
|------|-------------|---------|
| `ADR` | Architecture Decision Record | "Use GraphQL for API" |
| `PRD` | Product Requirements Document | "User Authentication Feature" |
| `ContextModule` | Patterns, gotchas, insights | "Async validation reduces lag" |
| `Session` | Development session logs | "2025-11-07 sprint work" |
| `CodeFile` | Source file metadata | "auth-middleware.ts" |

### Relationships

Nodes can be connected via **relationships**:

- **IMPLEMENTS** - Node implements another node (e.g., ADR implements PRD)
- **REFERENCES** - Node references another node (e.g., module references ADR)
- **TAGGED_WITH** - Node tagged with a tag
- **RELATED_TO** - Semantic similarity relationship (auto-generated)

### Projects

**Projects** organize knowledge by repository or product:

- Each project has its own knowledge graph
- Projects can be **public** (open-source) or **private**
- Projects link to GitHub repositories for context
- Projects have members with roles (owner, editor, viewer)

### Teams

**Teams** group users for collaboration:

- Teams can have multiple members
- Teams can be added to projects
- Team members inherit project access
- Teams enable shared context loading

### Vector Embeddings

Every knowledge node has a **vector embedding** (1024-dimensional) generated by Voyage AI. This enables:

- **Semantic search** - Find similar content by meaning, not just keywords
- **Automatic relationships** - Discover related nodes via similarity
- **Context-aware queries** - Return relevant knowledge for current work

---

## Getting Started

### Installation

```bash
npm install -g @ginko/cli
```

Verify:
```bash
ginko --version
```

### Authentication

```bash
ginko login
```

This generates a long-lived API key stored at `~/.ginko/auth.json`.

**Environment Variable (CI/CD):**
```bash
export GINKO_API_KEY=gk_abc123...
ginko whoami  # Uses env var instead of auth.json
```

### First Project

```bash
# Create project
ginko project create my-app --repo=github.com/yourname/my-app

# Verify
ginko project list

# Set active (if not already)
ginko project use <project-id>
```

---

## Knowledge Management

### Creating Knowledge

**Interactive Mode:**
```bash
ginko knowledge create
```

**Non-Interactive:**
```bash
ginko knowledge create \
  --type ADR \
  --title "Use Neo4j for Knowledge Graph" \
  --content "We chose Neo4j because..." \
  --tags graph,database,architecture \
  --status accepted
```

**From File:**
```bash
ginko knowledge create \
  --type ADR \
  --title "API Decision" \
  --file docs/adr/ADR-050.md
```

### Searching Knowledge

**Basic Search:**
```bash
ginko knowledge search "authentication patterns"
```

**With Filters:**
```bash
ginko knowledge search "database" \
  --type ADR \
  --status active \
  --limit 10 \
  --threshold 0.8
```

**Table Output:**
```bash
ginko knowledge search "security" --table
```

**Output:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ID           ‚îÇ Title                  ‚îÇ Type     ‚îÇ Score ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ adr_abc123   ‚îÇ OAuth2 Implementation  ‚îÇ ADR      ‚îÇ 0.92  ‚îÇ
‚îÇ prd_def456   ‚îÇ Auth System Redesign   ‚îÇ PRD      ‚îÇ 0.87  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Visualizing Relationships

**Tree View:**
```bash
ginko knowledge graph adr_abc123
```

**Output:**
```
ADR: Use Neo4j for Knowledge Graph
‚îú‚îÄ IMPLEMENTS
‚îÇ  ‚îî‚îÄ PRD: Cloud Knowledge Platform
‚îú‚îÄ REFERENCES
‚îÇ  ‚îú‚îÄ ADR: Graph Database Evaluation
‚îÇ  ‚îî‚îÄ ContextModule: Neo4j Best Practices
‚îî‚îÄ TAGGED_WITH
   ‚îú‚îÄ Tag: graph
   ‚îî‚îÄ Tag: database
```

**Mermaid Diagram:**
```bash
ginko knowledge graph adr_abc123 --format mermaid > graph.mmd
```

**JSON Output:**
```bash
ginko knowledge graph adr_abc123 --format json | jq
```

### Updating Knowledge

Use the API directly (CLI update command coming soon):

```bash
curl -X PUT https://app.ginkoai.com/api/v1/knowledge/nodes/adr_abc123 \
  -H "Authorization: Bearer $GINKO_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "graphId": "graph_xyz",
    "data": {
      "status": "deprecated",
      "content": "Updated content..."
    }
  }'
```

### Deleting Knowledge

```bash
curl -X DELETE https://app.ginkoai.com/api/v1/knowledge/nodes/adr_abc123?graphId=graph_xyz \
  -H "Authorization: Bearer $GINKO_API_KEY"
```

---

## Project Management

### Creating Projects

```bash
ginko project create <name> [options]
```

**Options:**
- `--repo <url>` - GitHub repository URL
- `--visibility <public|private>` - Default: private
- `--description <text>` - Project description

**Example:**
```bash
ginko project create my-saas-app \
  --repo github.com/yourname/saas-app \
  --visibility private \
  --description "SaaS platform for team collaboration"
```

### Listing Projects

```bash
ginko project list
```

**Output:**
```
üì¶ Your Projects

my-saas-app (private)
  ID: proj_abc123
  Repo: github.com/yourname/saas-app
  Members: 5
  Knowledge Nodes: 127

my-oss-lib (public)
  ID: proj_def456
  Repo: github.com/yourname/oss-lib
  Members: 12
  Knowledge Nodes: 84
```

### Project Details

```bash
ginko project info <project-id>
```

**Output:**
```
üì¶ Project: my-saas-app

ID: proj_abc123
Repository: github.com/yourname/saas-app
Visibility: private
Created: 2025-10-15
Members: 5 (3 editors, 2 viewers)
Teams: backend-team, frontend-team
Knowledge Nodes: 127
  - ADRs: 23
  - PRDs: 15
  - Context Modules: 67
  - Sessions: 22
```

### Managing Members

**Add Member:**
```bash
ginko project add-member alice@example.com --role editor
```

**Roles:**
- `owner` - Full control (add/remove members, delete project)
- `editor` - Create and edit knowledge
- `viewer` - Read-only access

**Remove Member:**
```bash
ginko project remove-member alice@example.com
```

### Switching Projects

```bash
ginko project use <project-id>
```

This sets the active project for all subsequent commands.

---

## Team Collaboration

### Creating Teams

```bash
ginko team create backend-team
```

### Listing Teams

```bash
ginko team list
```

**Output:**
```
üë• Your Teams

backend-team
  ID: team_abc123
  Members: 8
  Projects: 3

frontend-team
  ID: team_def456
  Members: 5
  Projects: 2
```

### Adding Team Members

```bash
ginko team add-member backend-team alice@example.com
```

### Adding Team to Project

```bash
ginko team add-to-project backend-team my-saas-app --role editor
```

This grants all team members editor access to the project.

### Team Event Filtering

When you run `ginko start`, it loads recent events from your team members:

```bash
ginko start
```

**Output:**
```
Loading team context...
  - alice: Implemented OAuth flow (2 hours ago)
  - bob: Fixed database migration issue (4 hours ago)
  - carol: Updated API documentation (1 day ago)

Session started. Team context loaded.
```

---

## Session Workflows

### Starting a Session

```bash
ginko start
```

**What this does:**
1. Loads recent events from your cursor position
2. Loads high-signal events from team members
3. Generates a resume point with key context
4. Starts tracking your work

**Options:**
- `--no-log` - Disable automatic session logging
- `--strategic` - Use legacy strategic loading (slower)

### Logging Insights

```bash
ginko log "Discovered async validation reduces form lag by 40%"
```

**With Metadata:**
```bash
ginko log "Fixed race condition in auth middleware" \
  --category fix \
  --impact high \
  --files packages/api/auth.ts:45
```

**Categories:**
- `fix` - Bug fixes
- `feature` - New features
- `decision` - Architecture decisions
- `insight` - Patterns or gotchas
- `achievement` - Milestones

### Session Handoff

```bash
ginko handoff "Completed OAuth implementation. Next: add refresh token logic"
```

This creates a session handoff entry that another developer (or AI) can pick up.

---

## Search & Discovery

### Semantic Search

Ginko uses **vector embeddings** for semantic search. This means you can search by meaning, not just keywords:

**Query:** "How do we handle authentication?"

**Matches:**
- "OAuth2 Implementation" (exact match)
- "User Login Flow" (synonym)
- "API Security Strategy" (related concept)
- "JWT Token Validation" (implementation detail)

### Advanced Search Filters

**By Type:**
```bash
ginko knowledge search "database" --type ADR
```

**By Status:**
```bash
ginko knowledge search "feature" --status draft
```

**By Threshold:**
```bash
# Only show highly relevant results (>90% similarity)
ginko knowledge search "security" --threshold 0.9
```

**Multiple Filters:**
```bash
ginko knowledge search "auth" \
  --type ADR \
  --status active \
  --limit 5 \
  --threshold 0.8
```

### Public Discovery Catalog

Browse knowledge from open-source projects:

```bash
open https://app.ginkoai.com/explore
```

**Features:**
- Search across all public projects
- Filter by tags (e.g., "authentication", "database")
- Sort by trending or recent
- View project knowledge graphs
- Fork interesting knowledge to your projects

---

## Advanced Features

### GraphQL Queries

Use the GraphQL API directly for complex queries:

**Endpoint:** `https://app.ginkoai.com/api/graphql`

**Example: Find Implementation Progress**
```graphql
query Progress {
  implementationProgress(
    projectId: "my-saas-app"
    graphId: "graph_xyz"
  ) {
    totalPRDs
    implementedPRDs
    inProgressPRDs
    completionPercentage
    recentDecisions {
      id
      title
      createdAt
    }
  }
}
```

**Example: Context-Aware Query**
```graphql
query ContextualNodes {
  contextualNodes(
    graphId: "graph_xyz"
    context: {
      projectId: "my-saas-app"
      branch: "feature/auth"
      userId: "user_123"
    }
    limit: 20
  ) {
    id
    title
    type
    content
  }
}
```

See [API Reference](../api/API-REFERENCE.md) for complete GraphQL schema.

### REST API Integration

All CLI commands use the REST API under the hood. You can integrate directly:

**Create Node:**
```bash
curl -X POST https://app.ginkoai.com/api/v1/knowledge/nodes \
  -H "Authorization: Bearer $GINKO_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "ADR",
    "graphId": "graph_xyz",
    "data": {
      "title": "Use Redis for Caching",
      "content": "We will use Redis...",
      "status": "active",
      "tags": ["cache", "redis"]
    }
  }'
```

**Search Nodes:**
```bash
curl "https://app.ginkoai.com/api/v1/knowledge/nodes?graphId=graph_xyz&type=ADR&limit=10" \
  -H "Authorization: Bearer $GINKO_API_KEY"
```

See [API Reference](../api/API-REFERENCE.md) for complete REST API documentation.

### Local-to-Cloud Sync

Migrate existing local knowledge files to the cloud:

```bash
# Dry run (preview changes)
ginko knowledge sync docs/adr/ --type ADR --dry-run

# Actual sync
ginko knowledge sync docs/adr/ --type ADR
```

**What this does:**
1. Scans local directory for markdown files
2. Parses frontmatter and content
3. Creates knowledge nodes in cloud graph
4. Preserves existing metadata (dates, authors)
5. Detects duplicates and conflicts

See [Migration Guide](./MIGRATION-GUIDE.md) for complete instructions.

---

## Best Practices

### 1. Use Descriptive Titles

**Good:**
- "Use GraphQL Yoga for Knowledge API"
- "Implement OAuth2 with GitHub Provider"

**Bad:**
- "API Decision"
- "Auth Stuff"

### 2. Tag Consistently

Establish team conventions for tags:

**Architecture Tags:**
- `database`, `api`, `frontend`, `backend`
- `security`, `performance`, `scalability`

**Status Tags:**
- `experimental`, `proven`, `deprecated`

**Domain Tags:**
- `auth`, `payments`, `notifications`

### 3. Reference Related Knowledge

When creating ADRs, reference the PRDs they implement:

```bash
# 1. Create PRD
ginko knowledge create --type PRD --title "User Authentication"

# 2. Create ADR that implements it (use API to add relationship)
# See API docs for relationship creation
```

### 4. Keep Content Searchable

Write content that will be easy to find later:

**Good Content:**
- "We chose PostgreSQL because it provides strong ACID guarantees, excellent JSON support, and proven scalability up to millions of rows."

**Bad Content:**
- "Using Postgres."

### 5. Use Status Fields

Update status as decisions evolve:

- `draft` - Initial proposal
- `active` - Approved and implemented
- `deprecated` - Replaced by newer decision
- `archived` - No longer relevant

### 6. Log Defensively

Use `ginko log` frequently to capture insights:

```bash
# After fixing a bug
ginko log "Race condition in auth: Always acquire lock before token refresh"

# After discovering a pattern
ginko log "Form validation: Async validation with 300ms debounce reduces server load by 80%"

# After making a decision
ginko log "Decision: Use Zod instead of Yup for schema validation. Better TypeScript inference."
```

---

## Troubleshooting

### Authentication Issues

**Problem:** "Authentication failed" or "Invalid API key"

**Solutions:**
1. Regenerate API key: `ginko login --force`
2. Check auth file: `cat ~/.ginko/auth.json`
3. Verify API key in dashboard: https://app.ginkoai.com/dashboard/settings/api-keys
4. Check environment variable: `echo $GINKO_API_KEY`

### Search Returns No Results

**Problem:** Search returns empty results even though knowledge exists

**Possible Causes:**
1. **Similarity threshold too high** - Try `--threshold 0.6` or lower
2. **Content not indexed yet** - Wait 30 seconds after creation for embeddings to generate
3. **Wrong project** - Verify active project: `ginko project list`
4. **Status filter** - Try searching with `--status draft` if content is not active

### Project Not Found

**Problem:** "No active project" or "Project not found"

**Solutions:**
1. List projects: `ginko project list`
2. Set active project: `ginko project use <project-id>`
3. Create new project: `ginko project create my-app`

### Slow Session Start

**Problem:** `ginko start` takes >5 seconds

**Possible Causes:**
1. **Network latency** - Check connection to app.ginkoai.com
2. **Large event stream** - Consider archiving old sessions
3. **API unavailable** - Falls back to strategic loading (slower)

**Solutions:**
- Use `--strategic` flag explicitly to skip event loading
- Check network: `ping app.ginkoai.com`
- Check API status: https://status.ginkoai.com

### Permission Denied

**Problem:** "Unauthorized: No access to specified graph"

**Solutions:**
1. Verify project membership: `ginko project info <project-id>`
2. Ask project owner to add you: `ginko project add-member your@email.com`
3. Check if project is private: Only members can access

### CLI Command Not Found

**Problem:** `ginko: command not found`

**Solutions:**
1. Verify installation: `npm list -g @ginko/cli`
2. Check npm global bin path: `npm config get prefix`
3. Add to PATH: `export PATH="$(npm config get prefix)/bin:$PATH"`
4. Reinstall: `npm install -g @ginko/cli`

---

## Getting Help

### Documentation

- **Quick Start:** [QUICK-START.md](./QUICK-START.md)
- **CLI Reference:** [CLI-REFERENCE.md](./CLI-REFERENCE.md)
- **API Reference:** [API-REFERENCE.md](../api/API-REFERENCE.md)
- **Migration Guide:** [MIGRATION-GUIDE.md](./MIGRATION-GUIDE.md)

### Support Channels

- **GitHub Issues:** https://github.com/chrispangg/ginko/issues
- **Discord Community:** https://discord.gg/ginko
- **Email Support:** chris@watchhill.ai
- **Twitter:** @ginkoai

### Contributing

Ginko is open source! Contribute at:
- **GitHub:** https://github.com/chrispangg/ginko
- **Docs:** https://github.com/chrispangg/ginko/tree/main/docs

---

**Next:** Explore the [CLI Reference](./CLI-REFERENCE.md) for detailed command documentation or the [API Reference](../api/API-REFERENCE.md) for programmatic integration.
