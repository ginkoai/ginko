# Session Handoff: BUG-005/011 Fix & UAT Bug Audit

**Date:** 2026-02-02
**Author:** Claude (Opus 4.5) with Chris Norton
**Branch:** main
**Commits:** `f614c6f`, `679f053`

---

## Session Summary

Fixed BUG-005/011 (GraphAdapter 403 on node creation) and performed a comprehensive audit of all 24 UAT bugs, updating statuses based on git history and code verification.

## What Was Done

### BUG-005/011 Fix (Primary)
- **Root cause:** `.env` had stale `GINKO_GRAPH_TOKEN=test_token_12345` overriding the real `gk_` API key from `~/.ginko/auth.json`
- **Fix:** Removed stale token from `.env`, updated `.env.example` with documentation
- **Also fixed:** `mcp.ginko.ai` -> `app.ginkoai.com` in graph-adapter URLs (both `src/adapters/` and `packages/cli/src/`)
- **Dashboard:** Added diagnostic logging to `nodes/route.ts` and `access.ts`, deployed to Vercel
- **Verified:** `ginko log` succeeds without 403 fallback

### UAT Bug Audit
Audited all 24 bugs (BUG-001 through BUG-024):
- **18 fixed/closed** (including 6 newly verified this session)
- **1 open** (BUG-022: client-side validation for empty task IDs)
- **4 untested** (BUG-013/014/015/017: dashboard-only, require browser)
- **1 not tested** (BUG-016: auto-assignment)
- Bug tracker CSV saved to `docs/archive/bug-tracker.csv`

### MCP Architecture Deprecation
- Closed BUG-002 as obsolete (MCP no longer core workflow)
- Deprecated ADR-013, ADR-014, ADR-016 (all superseded by ADR-077 git-native CLI)

## Files Changed

| File | Change |
|------|--------|
| `.env` | Removed stale `GINKO_GRAPH_TOKEN=test_token_12345` |
| `.env.example` | Updated token docs, fixed API URL |
| `src/adapters/graph-adapter.ts` | `mcp.ginko.ai` -> `app.ginkoai.com` |
| `packages/cli/src/.../graph-adapter.ts` | `mcp.ginko.ai` -> `app.ginkoai.com` (comments) |
| `dashboard/src/app/api/v1/graph/nodes/route.ts` | Diagnostic logging |
| `dashboard/src/lib/graph/access.ts` | Diagnostic logging |
| `docs/sprints/SPRINT-adhoc_260201-uat-r3-bug-fixes.md` | Updated all task statuses |
| `docs/archive/BUGS.md` | Closed BUG-002 |
| `docs/archive/bug-tracker.csv` | New — full bug status CSV |
| `docs/adr/ADR-013-*.md` | Deprecated |
| `docs/adr/ADR-014-*.md` | Deprecated |
| `docs/adr/ADR-016-*.md` | Deprecated |

## Remaining Work

### Open Bugs
- **BUG-022** (MEDIUM): No client-side validation for empty/malformed task IDs
- **BUG-016** (MEDIUM): Tasks not auto-assigned to user when work begins — needs testing

### Untested (Dashboard, requires browser)
- **BUG-013**: Insights page "No Insights Available"
- **BUG-014**: Dashboard doesn't persist last-accessed project
- **BUG-015**: Task assignee freeform text vs dropdown
- **BUG-017**: No team status view on dashboard

### Sprint adhoc_260201_s01 remaining tasks
- **t06**: 3-way merge with node-diff3 (Phase 2 enhancement)
- **t07**: Sync state graph versions (Phase 3 enhancement)
- **t08**: Dashboard manual UAT testing
- **t10**: Final commit and ship (partial)

## Environment Notes
- Dashboard deployed to Vercel with diagnostic logging (live)
- CLI package rebuilt with corrected URLs (`packages/cli/dist/`)
- Published `@ginkoai/cli@2.3.0` does NOT need republishing — runtime URL was already correct
- `.env` no longer has `GINKO_GRAPH_TOKEN` — token loads from `~/.ginko/auth.json`

## Next Session Suggestion
1. Run dashboard UAT tests in browser (BUG-013/014/015/017)
2. Fix BUG-022 (client-side task ID validation)
3. Test BUG-016 (auto-assignment)
